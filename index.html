<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="res/js/jquery.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="res/css/style.css">
    <title>postIt! Just Post It</title>
  </head>
  <body>
    <header>
      <nav>
        <div class="logo-container">
          <img src="res/images/logo.png" alt="postIt">
        </div>
        <div class="search-container">
          <input type="text" name="search"><button type="button">Search</button>
        </div>
        <div class="avatar-container">
          <img id="post-author-img" src="res/images/avatar.png" class="avatar" alt="Me">
          <div class="profile-info-dropdown">
            <div id="profile-name"></div>
            <div id="profile-email"></div>
            <div class="profile-link">
              <a href="browse.html">Browse</a>
            </div>
            <div class="profile-link">
              <a href="login.html">Log Out</a>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <section class="main-container">
      <div class="post">
        <div class="post-author">
          <span class="post-author-info">
            <img src="res/images/avatar.png" alt="Post author">
            <small>John Doe</small>
          </span>
          <small>Sep 18, 2020 15:16</small>
        </div>
        <div class="post-image">
          <img src="res/images/posts/1.jpg" alt="">
        </div>
        <div class="post-title">
          <h3>I think it's going to rain</h3>
        </div>
        <div class="post-actions">
          <button type="button" name="like" class="like-button">100k</button>
        </div>
      </div>

      <div class="post">
        <div class="post-author">
          <span class="post-author-info">
            <img src="res/images/avatar.png" alt="Post author">
            <small>John Doe</small>
          </span>
          <small>Sep 18, 2020 15:16</small>
        </div>
        <div class="post-title">
          <h3>Which weighs more, a pound of feathers or a pound of bricks?</h3>
        </div>
        <div class="post-actions">
          <button type="button" name="like" class="like-button">15k</button>
        </div>
      </div>

      <div class="post">
        <div class="post-author">
          <span class="post-author-info">
            <img src="res/images/avatar.png" alt="Post author">
            <small>John Doe</small>
          </span>
          <small>Sep 18, 2020 17:18</small>
        </div>
        <div class="post-image">
          <img src="res/images/posts/2.jpg" alt="">
        </div>
        <div class="post-title">
          <h3>Felt cute, might delete later</h3>
        </div>
        <div class="post-actions">
          <button type="button" name="like" class="like-button liked">10k</button>
        </div>
      </div>
      <script src="res/js/api.js"></script>
      <script>
        Get('users/1').then(res => {
          $('#post-author-img').hover(() => {
            $('.profile-info-dropdown').show();
          })
          $('.avatar-container').hover((e) => {
            $('.profile-info-dropdown').hide();
          });
          if(res){
            const firstName = res && res.firstname || '';
            const lastName = res && res.lastname || '';
            const email = res && res.email || '';
            const avatar = res && res.avatar || '';
            $('#profile-name').html( firstName + (firstName && ' ') + lastName || 'Name not found!');
            $('#profile-email').html(email || 'Email not found!');
            if(avatar){
              $('#post-author-img').attr('src', avatar);
            }
          }
        })
      </script>
    </section>
  </body>
</html>
